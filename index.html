<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicaci칩n Web VR - Examen Tema 4</title>
    
    <!-- A-Frame VR Framework -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #000;
        }
        
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            text-align: center;
        }
        
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        #instructions {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            max-width: 300px;
            z-index: 100;
        }
    </style>
</head>
<body>
    <!-- Pantalla de carga -->
    <div id="loadingScreen">
        <div class="loader"></div>
        <h2>Cargando Aplicaci칩n VR</h2>
        <p>Preparando escenario inmersivo...</p>
        <p><small>Compatible con Meta Quest 3</small></p>
    </div>
    
    <!-- Instrucciones -->
    <div id="instructions">
        <h3>游봏 Instrucciones VR</h3>
        <p><strong>PC:</strong> Usa WASD para moverte, mouse para mirar</p>
        <p><strong>VR:</strong> Usa tus manos para interactuar</p>
        <p><strong>Click:</strong> Interact칰a con los objetos</p>
        <p>Los objetos cambian de color al tocarlos</p>
    </div>

    <!-- Escena A-Frame -->
    <a-scene 
        vr-mode-ui="enabled: true" 
        background="color: #87CEEB"
        fog="type: linear; color: #87CEEB; near: 20; far: 100">
        
        <!-- Assets -->
        <a-assets>
            <!-- Intentar cargar el modelo GLB si existe -->
            <a-asset-item id="bathroom-model" src="./assets/the_bathroom_free.glb"></a-asset-item>
        </a-assets>

        <!-- Iluminaci칩n mejorada -->
        <a-light type="ambient" color="#404040" intensity="0.6"></a-light>
        <a-light type="directional" position="5 10 5" color="#ffffff" intensity="0.8"></a-light>
        <a-light type="point" position="0 5 0" color="#ffaa00" intensity="0.4"></a-light>

        <!-- Modelo del ba침o (si existe) -->
        <a-entity 
            id="bathroom-scene"
            gltf-model="#bathroom-model" 
            position="0 0 0" 
            scale="1 1 1"
            visible="false">
        </a-entity>

        <!-- Entorno b치sico de ba침o creado con primitivas -->
        <a-entity id="bathroom-environment">
            <!-- Suelo del ba침o -->
            <a-plane 
                position="0 0 -3" 
                rotation="-90 0 0" 
                width="8" 
                height="8"
                material="color: #E6E6FA; roughness: 0.8"
                shadow="receive: true">
            </a-plane>
            
            <!-- Paredes -->
            <a-plane position="0 4 -7" width="8" height="8" material="color: #F0F8FF"></a-plane>
            <a-plane position="-4 4 -3" rotation="0 90 0" width="8" height="8" material="color: #F0F8FF"></a-plane>
            <a-plane position="4 4 -3" rotation="0 -90 0" width="8" height="8" material="color: #F0F8FF"></a-plane>
            
            <!-- Ba침era b치sica -->
            <a-box position="-2 0.5 -5" width="2" height="1" depth="4" material="color: #FFFFFF"></a-box>
            
            <!-- Lavabo -->
            <a-cylinder position="2 1 -5" radius="0.8" height="0.2" material="color: #FFFFFF"></a-cylinder>
            <a-box position="2 0.5 -5" width="1.5" height="1" depth="0.8" material="color: #8B4513"></a-box>
            
            <!-- Inodoro -->
            <a-cylinder position="0 0.4 -6" radius="0.4" height="0.8" material="color: #FFFFFF"></a-cylinder>
            <a-box position="0 0.8 -6.3" width="0.6" height="0.4" depth="0.2" material="color: #FFFFFF"></a-box>
        </a-entity>

        <!-- 16 Objetos 3D interactivos con rotaci칩n aleatoria -->
        
        <!-- 1. Cubo rojo -->
        <a-box 
            id="cube1"
            position="2 1.5 -2" 
            scale="0.5 0.5 0.5"
            material="color: #FF6B6B; metalness: 0.3"
            class="interactive-object"
            animation="property: rotation; to: 360 360 360; loop: true; dur: 8000">
        </a-box>

        <!-- 2. Esfera azul -->
        <a-sphere 
            id="sphere1"
            position="-2 2 -1" 
            radius="0.4"
            material="color: #4ECDC4; metalness: 0.5"
            class="interactive-object"
            animation="property: rotation; to: 180 360 270; loop: true; dur: 6000">
        </a-sphere>

        <!-- 3. Cilindro verde -->
        <a-cylinder 
            id="cylinder1"
            position="1 1 -1" 
            radius="0.3" 
            height="1"
            material="color: #45B7D1; roughness: 0.4"
            class="interactive-object"
            animation="property: rotation; to: 270 180 360; loop: true; dur: 7000">
        </a-cylinder>

        <!-- 4. Cono naranja -->
        <a-cone 
            id="cone1"
            position="-1 1.5 -4" 
            radius-bottom="0.4" 
            height="0.8"
            material="color: #FF6347; metalness: 0.3"
            class="interactive-object"
            animation="property: rotation; to: 360 270 180; loop: true; dur: 5000">
        </a-cone>

        <!-- 5. Torus p칰rpura -->
        <a-torus 
            id="torus1"
            position="3 2.5 -1" 
            radius="0.4" 
            radius-tubular="0.1"
            material="color: #9ACD32; metalness: 0.6"
            class="interactive-object"
            animation="property: rotation; to: 180 360 90; loop: true; dur: 9000">
        </a-torus>

        <!-- 6. Octaedro rosa -->
        <a-octahedron 
            id="octahedron1"
            position="0 3 -2" 
            radius="0.4"
            material="color: #DDA0DD; metalness: 0.7"
            class="interactive-object"
            animation="property: rotation; to: 360 180 360; loop: true; dur: 4000">
        </a-octahedron>

        <!-- 7. Dodecaedro magenta -->
        <a-dodecahedron 
            id="dodecahedron1"
            position="-3 1.8 -3" 
            radius="0.3"
            material="color: #FF69B4; roughness: 0.4"
            class="interactive-object"
            animation="property: rotation; to: 270 360 180; loop: true; dur: 6500">
        </a-dodecahedron>

        <!-- 8. Icosaedro turquesa -->
        <a-icosahedron 
            id="icosahedron1"
            position="2.5 1 -4" 
            radius="0.35"
            material="color: #20B2AA; metalness: 0.8"
            class="interactive-object"
            animation="property: rotation; to: 360 90 270; loop: true; dur: 7500">
        </a-icosahedron>

        <!-- 9. Tetraedro dorado -->
        <a-tetrahedron 
            id="tetrahedron1"
            position="-2.5 2.5 -1" 
            radius="0.4"
            material="color: #FFD700; metalness: 0.5"
            class="interactive-object"
            animation="property: rotation; to: 180 270 360; loop: true; dur: 5500">
        </a-tetrahedron>

        <!-- 10. Plano inclinado -->
        <a-plane 
            id="plane1"
            position="1.5 2 -2.5" 
            width="1" 
            height="1"
            material="color: #87CEEB; side: double"
            rotation="45 30 15"
            class="interactive-object"
            animation="property: rotation; to: 405 390 375; loop: true; dur: 8500">
        </a-plane>

        <!-- 11. Anillo naranja -->
        <a-ring 
            id="ring1"
            position="0 1 -5" 
            radius-inner="0.2" 
            radius-outer="0.4"
            material="color: #FF4500; side: double; metalness: 0.7"
            class="interactive-object"
            animation="property: rotation; to: 360 180 270; loop: true; dur: 6000">
        </a-ring>

        <!-- 12. Cubo wireframe -->
        <a-box 
            id="cube2"
            position="-1.5 3 -4.5" 
            scale="0.6 0.6 0.6"
            material="color: #00CED1; wireframe: true"
            class="interactive-object"
            animation="property: rotation; to: 270 360 90; loop: true; dur: 4500">
        </a-box>

        <!-- 13. Esfera met치lica -->
        <a-sphere 
            id="sphere2"
            position="3.5 1.5 -2.5" 
            radius="0.35"
            material="color: #C0C0C0; metalness: 1.0; roughness: 0.1"
            class="interactive-object"
            animation="property: rotation; to: 360 270 180; loop: true; dur: 7000">
        </a-sphere>

        <!-- 14. Cilindro transparente -->
        <a-cylinder 
            id="cylinder2"
            position="-3.5 1.2 -2" 
            radius="0.4" 
            height="0.8"
            material="color: #8A2BE2; transparent: true; opacity: 0.7"
            class="interactive-object"
            animation="property: rotation; to: 180 360 270; loop: true; dur: 5800">
        </a-cylinder>

        <!-- 15. Cono invertido -->
        <a-cone 
            id="cone2"
            position="0.5 0.5 -3.5" 
            radius-bottom="0.3" 
            height="0.6"
            rotation="180 0 0"
            material="color: #32CD32; roughness: 0.6"
            class="interactive-object"
            animation="property: rotation; to: 540 360 180; loop: true; dur: 6200">
        </a-cone>

        <!-- 16. Torus knot -->
        <a-torus-knot 
            id="torusknot1"
            position="2 3.5 -3.5" 
            radius="0.3" 
            radius-tubular="0.05"
            material="color: #FF1493; metalness: 0.8"
            class="interactive-object"
            animation="property: rotation; to: 360 180 360; loop: true; dur: 9500">
        </a-torus-knot>

        <!-- C치mara y controles -->
        <a-entity id="rig" position="0 1.6 4">
            <a-camera 
                id="camera"
                look-controls="pointerLockEnabled: true"
                wasd-controls="acceleration: 20">
                
                <a-cursor 
                    id="cursor"
                    position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                    material="color: white; shader: flat"
                    raycaster="objects: .interactive-object">
                </a-cursor>
            </a-camera>

            <!-- Controles VR -->
            <a-entity 
                id="leftHand"
                hand-controls="hand: left"
                laser-controls="hand: left">
            </a-entity>

            <a-entity 
                id="rightHand"
                hand-controls="hand: right"
                laser-controls="hand: right">
            </a-entity>
        </a-entity>
    </a-scene>

    <script src="./js/script.js"></script>
</body>
</html>

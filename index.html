<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AplicaciÃ³n Web VR - Examen Tema 4</title>
    
    <!-- Solo A-Frame bÃ¡sico - SIN EXTRAS -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        
        #instructions {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            max-width: 300px;
            z-index: 100;
        }
    </style>
</head>
<body>
    <!-- Instrucciones -->
    <div id="instructions">
        <h3>ðŸ¥½ VR AplicaciÃ³n Funcionando</h3>
        <p><strong>PC:</strong> WASD para moverte, mouse para mirar</p>
        <p><strong>VR:</strong> Haz click en los objetos para eliminarlos</p>
        <p>âœ¨ 16 objetos dispersos girando</p>
    </div>

    <!-- Escena A-Frame LIMPIA -->
    <a-scene 
        vr-mode-ui="enabled: true" 
        background="color: #87CEEB">
        
        <!-- IluminaciÃ³n bÃ¡sica -->
        <a-light type="ambient" color="#BBB" intensity="0.8"></a-light>
        <a-light type="directional" position="0 1 1" color="#FFF" intensity="0.5"></a-light>

        <!-- Entorno bÃ¡sico -->
        <a-plane 
            position="0 0 0" 
            rotation="-90 0 0" 
            width="40" 
            height="40"
            color="#8BC34A">
        </a-plane>

        <!-- Paredes -->
        <a-plane position="0 5 -20" width="40" height="10" color="#E0E0E0"></a-plane>
        <a-plane position="-20 5 0" rotation="0 90 0" width="40" height="10" color="#E0E0E0"></a-plane>
        <a-plane position="20 5 0" rotation="0 -90 0" width="40" height="10" color="#E0E0E0"></a-plane>

        <!-- 16 OBJETOS MUY DISPERSOS CON ROTACIÃ“N -->
        
        <!-- Esquina frontal izquierda -->
        <a-box 
            id="obj1"
            position="-15 1 15" 
            width="1" height="1" depth="1"
            color="#F44336"
            animation="property: rotation; to: 360 360 360; loop: true; dur: 8000"
            class="clickable">
        </a-box>

        <!-- Esquina frontal derecha -->
        <a-sphere 
            id="obj2"
            position="15 1 15" 
            radius="0.5"
            color="#2196F3"
            animation="property: rotation; to: 0 360 180; loop: true; dur: 6000"
            class="clickable">
        </a-sphere>

        <!-- Esquina trasera izquierda -->
        <a-cylinder 
            id="obj3"
            position="-15 1 -15" 
            radius="0.5" 
            height="1"
            color="#4CAF50"
            animation="property: rotation; to: 180 360 0; loop: true; dur: 7000"
            class="clickable">
        </a-cylinder>

        <!-- Esquina trasera derecha -->
        <a-cone 
            id="obj4"
            position="15 1 -15" 
            radius-bottom="0.5" 
            height="1"
            color="#FF9800"
            animation="property: rotation; to: 360 0 360; loop: true; dur: 5000"
            class="clickable">
        </a-cone>

        <!-- Centro alto -->
        <a-torus 
            id="obj5"
            position="0 4 0" 
            radius="0.5" 
            radius-tubular="0.1"
            color="#9C27B0"
            animation="property: rotation; to: 180 180 360; loop: true; dur: 9000"
            class="clickable">
        </a-torus>

        <!-- Lado izquierdo medio -->
        <a-box 
            id="obj6"
            position="-12 2 0" 
            width="1" height="1" depth="1"
            color="#E91E63"
            animation="property: rotation; to: 270 360 90; loop: true; dur: 4000"
            class="clickable">
        </a-box>

        <!-- Lado derecho medio -->
        <a-sphere 
            id="obj7"
            position="12 2 0" 
            radius="0.5"
            color="#00BCD4"
            animation="property: rotation; to: 360 270 180; loop: true; dur: 7500"
            class="clickable">
        </a-sphere>

        <!-- Centro frontal -->
        <a-cylinder 
            id="obj8"
            position="0 1 12" 
            radius="0.5" 
            height="1"
            color="#FFEB3B"
            animation="property: rotation; to: 90 360 270; loop: true; dur: 6500"
            class="clickable">
        </a-cylinder>

        <!-- Centro trasero -->
        <a-cone 
            id="obj9"
            position="0 1 -12" 
            radius-bottom="0.5" 
            height="1"
            color="#795548"
            animation="property: rotation; to: 360 90 360; loop: true; dur: 5500"
            class="clickable">
        </a-cone>

        <!-- Medio izquierdo frontal -->
        <a-box 
            id="obj10"
            position="-8 3 8" 
            width="1" height="1" depth="1"
            color="#607D8B"
            animation="property: rotation; to: 180 360 270; loop: true; dur: 8500"
            class="clickable">
        </a-box>

        <!-- Medio derecho frontal -->
        <a-sphere 
            id="obj11"
            position="8 3 8" 
            radius="0.5"
            color="#FF5722"
            animation="property: rotation; to: 360 180 90; loop: true; dur: 4500"
            class="clickable">
        </a-sphere>

        <!-- Medio izquierdo trasero -->
        <a-cylinder 
            id="obj12"
            position="-8 2 -8" 
            radius="0.5" 
            height="1"
            color="#CDDC39"
            animation="property: rotation; to: 270 180 360; loop: true; dur: 7200"
            class="clickable">
        </a-cylinder>

        <!-- Medio derecho trasero -->
        <a-cone 
            id="obj13"
            position="8 2 -8" 
            radius-bottom="0.5" 
            height="1"
            color="#009688"
            animation="property: rotation; to: 360 270 0; loop: true; dur: 6200"
            class="clickable">
        </a-cone>

        <!-- Alto izquierda -->
        <a-box 
            id="obj14"
            position="-5 4 -5" 
            width="1" height="1" depth="1"
            color="#673AB7"
            animation="property: rotation; to: 90 270 360; loop: true; dur: 5800"
            class="clickable">
        </a-box>

        <!-- Alto derecha -->
        <a-sphere 
            id="obj15"
            position="5 4 -5" 
            radius="0.5"
            color="#FFC107"
            animation="property: rotation; to: 360 90 270; loop: true; dur: 6800"
            class="clickable">
        </a-sphere>

        <!-- Centro medio -->
        <a-cylinder 
            id="obj16"
            position="0 2 5" 
            radius="0.5" 
            height="1"
            color="#03A9F4"
            animation="property: rotation; to: 180 360 180; loop: true; dur: 7800"
            class="clickable">
        </a-cylinder>

        <!-- CÃ¡mara con controles bÃ¡sicos -->
        <a-entity id="rig" position="0 1.6 0">
            <a-camera 
                look-controls="pointerLockEnabled: true"
                wasd-controls="acceleration: 20">
                <a-cursor 
                    color="white"
                    raycaster="objects: .clickable">
                </a-cursor>
            </a-camera>
        </a-entity>
    </a-scene>

    <script>
        // Script ultra limpio sin errores
        console.log('ðŸ¥½ AplicaciÃ³n VR iniciada - VersiÃ³n limpia');
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM cargado');
            
            // Obtener todos los objetos clickeables
            const clickables = document.querySelectorAll('.clickable');
            console.log(`ðŸ“¦ ${clickables.length} objetos encontrados`);
            
            // Configurar eventos de click
            clickables.forEach(function(obj) {
                obj.addEventListener('click', function() {
                    console.log(`ðŸŽ¯ Eliminando objeto: ${this.id}`);
                    
                    // Crear efecto simple antes de eliminar
                    this.setAttribute('animation__disappear', {
                        property: 'scale',
                        to: '0.1 0.1 0.1',
                        dur: 500
                    });
                    
                    // Eliminar despuÃ©s de la animaciÃ³n
                    setTimeout(() => {
                        if (this.parentNode) {
                            this.parentNode.removeChild(this);
                            console.log(`âœ… Objeto eliminado: ${this.id}`);
                            
                            // Verificar objetos restantes
                            const remaining = document.querySelectorAll('.clickable').length;
                            console.log(`ðŸ”¢ Objetos restantes: ${remaining}`);
                            
                            if (remaining === 0) {
                                console.log('ðŸŽ‰ Â¡Todos los objetos eliminados!');
                            }
                        }
                    }, 500);
                });
                
                // Efecto hover simple
                obj.addEventListener('mouseenter', function() {
                    this.setAttribute('scale', '1.2 1.2 1.2');
                });
                
                obj.addEventListener('mouseleave', function() {
                    this.setAttribute('scale', '1 1 1');
                });
            });
            
            console.log('âœ… AplicaciÃ³n VR configurada correctamente');
        });
    </script>
</body>
</html>
